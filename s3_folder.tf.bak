provider "aws" {
  region = "us-east-1" # change if needed
}

# Optional: reference the existing bucket (not creating it)
data "aws_s3_bucket" "existing" {
  bucket = "my-existing-bucket"
}

# Create a folder-like object
resource "aws_s3_object" "folder" {
  bucket = data.aws_s3_bucket.existing.bucket
  key    = "code/"  # the trailing slash makes it a "folder"
}

# Upload your local file to that folder
resource "aws_s3_object" "code_file" {
  bucket = data.aws_s3_bucket.existing.bucket
  key    = "code/main.py"
  source = "/Users/you/projects/app/main.py"
  etag   = filemd5("/Users/you/projects/app/main.py")
  content_type = "text/x-python"
}


